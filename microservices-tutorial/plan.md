# 微服务系统学习计划（面向 Java 开发）

> 本计划依据 `readme.md` 中的学习目标和范围设计，默认总周期约 8 周，可根据个人时间压缩或拉长。

## 1. 总体规划概览

- 总周期：约 8 周（可调整为 6–10 周）。
- 阶段划分：
  1. 预热与基础概念
  2. 单体应用与服务拆分
  3. 服务治理基础设施（注册、发现、配置、网关）
  4. 可靠性、消息队列与安全
  5. 可观测性与容器化部署
  6. 综合项目与总结提升
- 学习原则：**理论 30% + 实践 70%**，每个阶段都产出代码与总结。

## 2. 周度学习计划（建议 8 周版本）

> 时间列按“周”划分，你可以按自己的节奏微调，每周建议投入 4–6 小时。

| 周次 | 阶段目标 | 核心知识点 | 实践任务 | 主要输出 |
| --- | -------- | ---------- | -------- | -------- |
| 第 1 周 | 搞清微服务是什么、适用场景 | 单体 vs 微服务、分布式基础（CAP/BASE）、DDD 概念 | 选定一个简单业务场景（如商品+订单），用单体 Spring Boot 实现一个最简版 | 概念笔记；单体 Demo 项目代码 |
| 第 2 周 | 学会从单体拆分为多个服务 | 服务边界划分、接口设计、数据库拆分思路 | 基于第 1 周单体项目，拆分为用户/商品/订单等 2–3 个服务（先不引入注册中心） | 服务拆分设计文档；拆分后的多个 Spring Boot 服务 |
| 第 3 周 | 引入服务治理基础设施（一） | 注册中心、服务发现、负载均衡、Feign 调用 | 选择 Eureka 或 Nacos 搭建注册中心；各服务接入注册中心，使用 Feign 实现服务间调用 | 可运行的服务注册发现环境；调用链验证截图/笔记 |
| 第 4 周 | 引入服务治理基础设施（二） | 配置中心、网关、基础安全 | 引入 Spring Cloud Config 或 Nacos Config 管理配置；使用 Spring Cloud Gateway 接入各服务，配置路由与简单鉴权（如 JWT 验证） | 配置中心与网关配置文件；网关架构说明 |
| 第 5 周 | 提升系统可靠性和异步能力 | 熔断、限流、降级；消息队列；分布式事务思路 | 引入 Resilience4j 或 Sentinel，对关键调用进行熔断/限流；引入 Kafka/RabbitMQ 完成订单创建异步化处理 | 可靠性配置示例；一个包含 MQ 的业务流程 Demo |
| 第 6 周 | 掌握可观测性与基础运维能力 | 日志规范、链路追踪、指标与监控 | 引入 Sleuth/Zipkin 或类似方案做链路追踪；规范日志格式并输出 traceId；了解 Prometheus/Grafana 的使用思路（可选实操） | 链路追踪截图；日志与监控相关配置说明 |
| 第 7 周 | 学习容器化与部署 | Docker 基础、镜像构建、Compose | 为各服务编写 Dockerfile，使用 Docker Compose 一键启动本地微服务环境；了解部署到云或 K8s 的基本流程 | Dockerfile 与 docker-compose.yml；部署步骤文档 |
| 第 8 周 | 综合项目与复盘 | 综合运用前述所有知识 | 基于前几周成果整理为一个完整的 Demo 项目（3–5 个服务 + 注册中心 + 配置中心 + 网关 + MQ + 简单监控）；编写架构说明与经验总结 | 完整微服务示例项目；架构文档与学习总结；后续提升计划 |

## 3. 阶段详细计划

### 阶段一（第 1 周）：预热与基础概念

**目标：**  
理解微服务架构的基本思想、优劣势和适用场景，并完成一个简易单体应用。

**任务：**

- 阅读与整理：
  - 微服务定义与特征；
  - 单体架构的痛点；
  - CAP、BASE、最终一致性等分布式基础概念。
- Demo 实践：
  - 使用 Spring Boot 实现一个简易单体应用（如：登录 + 商品 + 下单）。
  - 采用典型的三层架构（Controller/Service/Repository）。

**输出：**

- 一份微服务基础概念笔记（Markdown）。
- 单体 Demo 项目代码（Git 仓库）。

---

### 阶段二（第 2 周）：单体拆分为多服务

**目标：**  
掌握服务拆分的基本原则与实践方法。

**任务：**

- 通过阅读/资料了解：
  - 以业务能力为中心的服务划分；
  - 如何识别服务边界（可参考 DDD 中的“限界上下文”概念）。
- 对第 1 周单体项目进行拆分：
  - 判断哪些模块适合作为独立服务（如用户、商品、订单）；
  - 拆分对应数据库表（可按服务拥有各自 schema 或库）；
  - 每个服务独立启动，使用 REST API 互相调用（暂不用注册中心）。

**输出：**

- 一份服务拆分设计文档（包含服务清单、边界说明、接口列表）。
- 多服务版本的项目代码。

---

### 阶段三（第 3–4 周）：服务治理基础设施（注册中心、配置中心、网关）

**目标：**  
掌握 Spring Cloud 生态中的核心组件，并完成接入实践。

**任务：**

- 第 3 周重点：
  - 选择技术栈：Spring Cloud Netflix + Eureka 或 Spring Cloud Alibaba + Nacos。
  - 搭建注册中心；将各服务注册到注册中心。
  - 使用 OpenFeign 实现服务间调用；配置负载均衡与超时重试。
- 第 4 周重点：
  - 引入配置中心：集中管理服务配置（数据库、MQ、公共配置等）。
  - 引入网关（Spring Cloud Gateway）：
    - 路由配置；
    - 全局过滤器（如日志、鉴权等）。
  - 基于 JWT 实现简单的认证与鉴权（放在网关层）。

**输出：**

- 注册中心与配置中心的搭建文档（启动命令、配置说明）。
- 网关服务代码与配置（路由策略、认证逻辑）。
- 更新后的系统架构图（推荐使用简单的 UML/绘图工具）。

---

### 阶段四（第 5 周）：可靠性与异步架构（熔断、限流、MQ、分布式事务思路）

**目标：**  
掌握基本的容错设计和异步消息机制，提高系统稳定性与扩展性。

**任务：**

- 理解：
  - 熔断、降级、限流、重试等概念与场景。
  - 分布式事务常见模式：本地消息表、事务消息、TCC 思想等。
- 实践：
  - 使用 Resilience4j 或 Sentinel 为关键调用添加熔断/限流策略。
  - 引入一个消息队列（Kafka/RabbitMQ）：
    - 下单流程：下单请求 → 本地落库 → 发送消息 → 其它服务消费。
  - 设计一个简化版的“最终一致性”方案（例如使用消息重试、补偿接口等）。

**输出：**

- 熔断/限流策略配置示例与说明。
- 使用 MQ 实现的一个完整业务流程示例。
- 一份简要的分布式事务笔记（实践中采用的具体方案说明）。

---

### 阶段五（第 6–7 周）：可观测性与容器化部署

**目标：**  
具备基本的故障排查视角和容器化思维，能在本地模拟生产部署环境。

**任务：**

- 第 6 周：可观测性
  - 定义日志规范（日志内容中包含 traceId/spanId）。
  - 引入链路追踪框架（如 Spring Cloud Sleuth + Zipkin 或 SkyWalking 等）。
  - 了解指标上报与监控（Micrometer + Prometheus + Grafana 的流程）。
- 第 7 周：容器化
  - 学习 Docker 基本概念与常用命令。
  - 为各服务编写 Dockerfile。
  - 使用 Docker Compose 编排注册中心、网关、服务实例、MQ、数据库等。
  - 探索将服务部署到云或 Kubernetes 的基本流程（了解级，可按时间决定是否动手实践）。

**输出：**

- 可观测性配置说明（日志、链路追踪、监控的配置文件与截图）。
- 每个服务的 Dockerfile 与 `docker-compose.yml`。
- 一份容器化部署步骤文档。

---

### 阶段六（第 8 周）：综合项目与总结提升

**目标：**  
将前面学习内容融合为一个完整项目，沉淀可复用的经验与文档。

**任务：**

- 梳理与整合前几周的代码，形成一个结构清晰的微服务项目：
  - 3–5 个业务服务 + 注册中心 + 配置中心 + 网关 + MQ；
  - 部分服务启用熔断/限流策略；
  - 至少有基础的日志与链路追踪能力；
  - 支持 Docker Compose 一键启动。
- 文档沉淀：
  - 编写项目架构说明（服务架构图、调用关系、技术选型说明）。
  - 梳理踩坑与经验、常见问题解决方案。
  - 列出下一步提升方向（如深入 Kubernetes、进一步优化安全机制、高级 DDD 等）。

**输出：**

- 完整的微服务示例项目仓库（含 README 与部署说明）。
- 一份学习总结文档：
  - 达成的目标；
  - 不足与疑惑；
  - 下一阶段计划。

## 4. 每周与每日学习节奏建议

- 每周：
  - 至少 1 次“整块时间”（2–3 小时）用于实践编码。
  - 其余零散时间用于阅读概念、整理笔记。
- 每日（如果有时间）可参考：
  - 30–45 分钟：阅读/视频学习 + 笔记。
  - 30–60 分钟：动手编码或调试项目。

## 5. 参考资料（可按阶段查阅）

> 以下是类型建议，具体书籍和链接可根据你平时的习惯选择中文版/英文版。

- 微服务与架构思想：
  - 《微服务设计》（Sam Newman）
  - 《Building Microservices》（英文版）
- Spring Boot / Spring Cloud：
  - Spring 官方文档
  - 社区高质量博客/专栏（按组件名称搜索，如“Spring Cloud Gateway 实战”）
- 容器与部署：
  - Docker 官方文档入门部分
  - 一本 Kubernetes 入门书或在线课程（可选）

---

> 建议你先把这两个文件放在自己的学习仓库中（如 `docs/readme.md` 和 `docs/plan.md`），后续可以按实际进度更新计划和记录笔记。

